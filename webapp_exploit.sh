!/bin/bash

# Author: Matias Ayala
# Date Created: 13 Apr 2023
# Last Modified: 13 Apr 2023

# Description:
# This script automates creates several txt files with information on a server for a targeted web application

# Usage:
# The customer will be prompted for an IP address for the scripts to run against. This IP address is
# saved to a variable and this variable is used in commands. 

# Save the IP address into variable target
read -p "Please enter the IP address of the web application server you are targetting: " target

echo " "

# Make a new directory to save all the reports created into one consolidated directory.
mkdir WebAppReports

# Change into the directory to save reports as they are created
cd WebAppReports

echo "Downloading the source code of the targetted server"

echo " "
# Download the source code of the webpage hosted on target server and save it to a file. 
curl http://$target > webserver-sourcecode.txt

echo " "

echo "The source code has been saved in $PWD/webserver-sourcecode.txt"

echo " "
sleep 1s

echo "Running a Nikto scan on $target."

# Run Nikto on target server's IP address and save the results in nikto-scan.txt
nikto -h http://$target > nikto-scan.txt

echo " "

echo "The results of the Nikto scan have been saved in $PWD/nikto-scan.txt"

sleep 1s

echo " "

echo "Running a DIRB scan on $target"

# Run DIRB on the targetted server and save the results in a file called dirb-scan.txt
dirb http://$target > dirb-scan.txt

echo " "

echo "The results from the DIRB scan have been saved in $PWD/dirb-scan.txt"

sleep 1s

echo " "

echo "Locating Nmap http scripts"

# Find the locations of the Nmap scripts on our Kali VM
locate *http*.nse

echo " "

read -p "Please copy and paste the file path of the Nmap http script you want to use from the above list: " scriptPath

echo " "

echo "Running the Nmap script."

# Run nmap script on the IP address of target server. Save results in nmapScript-results.txt
nmap --script $scriptPath $target > nmapScript-results.txt

echo " "

echo "The results of the Nmap script have been saved in $PWD/nmapScript-Results.txt"

sleep 1s

echo " "

echo "Terminating webApp_exploit.sh. Please review the reports saved in $PWD"

echo " "

echo "Enjoy hacking the webapp with this information :)"
